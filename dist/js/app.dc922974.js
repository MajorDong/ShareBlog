(function(t){function e(e){for(var r,o,i=e[0],c=e[1],u=e[2],d=0,p=[];d<i.length;d++)o=i[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&p.push(a[o][0]),a[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);l&&l(e);while(p.length)p.shift()();return s.push.apply(s,u||[]),n()}function n(){for(var t,e=0;e<s.length;e++){for(var n=s[e],r=!0,i=1;i<n.length;i++){var c=n[i];0!==a[c]&&(r=!1)}r&&(s.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},s=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/ShareBlog/dist/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],c=i.push.bind(i);i.push=e,i=i.slice();for(var u=0;u<i.length;u++)e(i[u]);var l=c;s.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"03e6":function(t,e,n){"use strict";var r=n("9fe2"),a=n.n(r);a.a},"17ad":function(t,e,n){"use strict";var r=n("6393"),a=n.n(r);a.a},"211b":function(t,e,n){},"35e0":function(t,e,n){"use strict";var r=n("6f06"),a=n.n(r);a.a},"3b90":function(t,e,n){},"3c07":function(t,e,n){"use strict";var r=n("ffa7"),a=n.n(r);a.a},"4d54":function(t,e,n){"use strict";var r=n("5592"),a=n.n(r);a.a},5592:function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("4de4");var r=n("53ca"),a=(n("e260"),n("e6cf"),n("cca6"),n("a79d"),n("2b0e")),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"header"}},[n("bheader")],1),n("main",{attrs:{id:"main"}},[n("router-view")],1),n("div",{attrs:{id:"footer"}},[n("bfooter")],1)])},o=[],i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"bheader"},[t.isLogin?n("div",{staticClass:"header2"},[n("h1",[n("router-link",{attrs:{to:"/"}},[t._v("BlOGTALK")])],1),n("div",[n("router-link",{attrs:{to:"/create"}},[n("i",{staticClass:"edit el-icon-plus"})])],1),n("div",{staticClass:"user"},[n("img",{staticClass:"avatar",attrs:{src:t.user.avatar,alt:t.user.username,title:t.user.name}}),n("ul",[n("li",[n("router-link",{attrs:{to:"/my"}},[t._v("我的")])],1),n("li",[n("a",{attrs:{href:"#"},on:{click:t.onLogout}},[t._v("注销")])])])])]):n("div",{staticClass:"header1"},[n("div",{staticClass:"banner"},[n("router-link",{attrs:{to:"/"}},[n("div",{staticClass:"logo"},[n("span",[t._v("BlogTalk")])])]),n("div",{staticClass:"sloganWrapper"},[n("h1",[t._v("We think through blogs.")]),n("div",{staticClass:"line"}),n("div",{staticClass:"title"},[t._v("用博客交流思想 LET'S SHARE")]),n("div",[n("router-link",{attrs:{to:"/login"}},[n("el-button",[t._v("立即登录")])],1),n("router-link",{attrs:{to:"/register"}},[n("el-button",[t._v("注册账号")])],1)],1)])],1)])])},c=[],u=(n("a4d3"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("ade3")),l=n("2f62");function d(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function p(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?d(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var g={name:"bheader",data:function(){return{}},computed:p({},Object(l["c"])(["user","isLogin"])),created:function(){this.checkLogin()},methods:p({},Object(l["b"])(["checkLogin","logout"]),{onLogout:function(){this.logout()}})},f=g,v=(n("35e0"),n("2877")),h=Object(v["a"])(f,i,c,!1,null,"63869180",null),b=h.exports,m=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},O=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("footer",{staticClass:"footer"},[n("span",[t._v("Copyright © 2019 Jerry Shen.")])])])}],y={},_=y,w=(n("9988"),Object(v["a"])(_,m,O,!1,null,"23144093",null)),x=w.exports,I={components:{bheader:b,bfooter:x}},j=I,C=(n("5c0b"),Object(v["a"])(j,s,o,!1,null,null,null)),k=C.exports,P=n("8c4f"),E=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"index"},[n("section",{staticClass:"blog-posts"},t._l(t.blogs,(function(e){return n("router-link",{key:e.id,attrs:{to:"/detail/"+e.id}},[n("div",{staticClass:"item"},[n("figure",{staticClass:"avatar"},[n("img",{attrs:{src:e.user.avatar,alt:e.user.username}}),n("figcaption",[t._v(t._s(e.user.username))])]),n("h3",[t._v(" "+t._s(e.title)+" "),n("span",[t._v(t._s(t._f("formatDate")(e.createdAt)))])]),n("p",[t._v(t._s(e.description))])])])})),1),n("section",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.onPageChange}})],1)])},D=[],L=(n("e25e"),n("e01a"),n("ac1f"),n("5319"),n("d3b7"),n("bc3a")),T=n.n(L),B=n("5c96"),$=n.n(B);function S(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return new Promise((function(r,a){var s={url:t,method:e};"get"===e.toLowerCase()?s.params=n:s.data=n,T()(s).then((function(t){"ok"===t.data.status?r(t.data):(B["Message"].error(t.data.msg),a(t.data))})).catch((function(){B["Message"].error("网络异常"),a({msg:"网络异常"})}))}))}T.a.defaults.baseURL="https://blog-server.hunger-valley.com",T.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded;charset=utf-8",T.a.defaults.withCredentials=!0;var A={GET_LIST:"/blog",GET_DETAIL:"/blog/:blogId",CREATE:"/blog",UPDATE:"/blog/:blogId",DELETE:"/blog/:blogId"},R={getBlogs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},e=t.page,n=void 0===e?1:e,r=t.userId,a=t.atIndex;return S(A.GET_LIST,"GET",{page:n,userId:r,atIndex:a})},getIndexBlogs:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{page:1},e=t.page,n=void 0===e?1:e;return this.getBlogs({page:n,atIndex:!0})},getBlogsByUserId:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{page:1},n=e.page,r=void 0===n?1:n,a=e.atIndex;return this.getBlogs({userId:t,page:r,atIndex:a})},getDetail:function(t){var e=t.blogId;return S(A.GET_DETAIL.replace(":blogId",e))},updateBlog:function(t,e){var n=t.blogId,r=e.title,a=e.content,s=e.description,o=e.atIndex;return S(A.UPDATE.replace(":blogId",n),"PATCH",{title:r,content:a,description:s,atIndex:o})},createBlog:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{title:"",content:"",description:"",atIndex:!1},e=t.title,n=void 0===e?"":e,r=t.content,a=void 0===r?"":r,s=t.description,o=void 0===s?"":s,i=t.atIndex,c=void 0!==i&&i;return S(A.CREATE,"POST",{title:n,content:a,description:o,atIndex:c})},deleteBlog:function(t){var e=t.blogId;return S(A.DELETE.replace(":blogId",e),"DELETE")}},G={name:"index",data:function(){return{blogs:[],total:0,page:1}},created:function(){var t=this;this.page=parseInt(this.$route.query.page)||1,R.getIndexBlogs({page:this.page}).then((function(e){t.blogs=e.data,t.total=e.total,t.page=e.page}))},methods:{onPageChange:function(t){var e=this;R.getIndexBlogs({page:t}).then((function(n){e.blogs=n.data,e.total=n.total,e.page=n.page,e.$router.push({path:"/",query:{page:t}})}))}}},U=G,M=(n("d1f3"),Object(v["a"])(U,E,D,!1,null,"91f15ece",null)),q=M.exports,N=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"detail"}},[n("section",{staticClass:"userInfo"},[n("figure",{staticClass:"avatar"},[n("img",{staticClass:"avatar",attrs:{src:t.user.avatar,alt:t.user.username}})]),n("h3",[t._v(t._s(t.title))]),n("p",[n("router-link",{attrs:{to:"/user/"+t.user.id}},[t._v(t._s(t.user.username))]),t._v(" 发布于"+t._s(t._f("formatDate")(t.createdAt))+" ")],1)]),n("section",{staticClass:"article",domProps:{innerHTML:t._s(t.markdown)}})])},F=[],H=n("e0c1"),J=n.n(H),z={data:function(){return{blogId:"",title:"",rawContent:"",user:{},createdAt:""}},computed:{markdown:function(){return J()(this.rawContent)}},created:function(){var t=this;this.blogId=this.$route.params.blogId,R.getDetail({blogId:this.blogId}).then((function(e){t.title=e.data.title,t.rawContent=e.data.content,t.createdAt=e.data.createdAt,t.user=e.data.user}))}},W=z,Y=(n("733f"),Object(v["a"])(W,N,F,!1,null,"388d7546",null)),K=Y.exports,Q=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"create"}},[n("h1",[t._v("创建文章")]),n("h3",[t._v("文章标题")]),n("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("p",{staticClass:"msg"},[t._v("限17个字")]),n("h3",[t._v("内容简介")]),n("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),n("p",{staticClass:"msg"},[t._v("限30个字")]),n("h3",[t._v("文章内容")]),n("el-input",{attrs:{type:"textarea",rows:"15"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("p",{staticClass:"msg"},[t._v("限30个字")]),n("div",[n("el-switch",{attrs:{"active-text":"首页展示","inactive-text":"自己可见"},model:{value:t.atIndex,callback:function(e){t.atIndex=e},expression:"atIndex"}})],1),n("el-button",{on:{click:t.onCreate}},[t._v("确定")])],1)},V=[],X={data:function(){return{atIndex:!1,title:"",description:"",content:""}},methods:{onCreate:function(){var t=this;R.createBlog({title:this.title,description:this.description,content:this.content,atIndex:this.atIndex}).then((function(e){t.$message.success(e.msg),t.$router.push({path:"/detail/".concat(e.data.id)})}))}}},Z=X,tt=(n("17ad"),Object(v["a"])(Z,Q,V,!1,null,"41baacfc",null)),et=tt.exports,nt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"edit"}},[n("h1",[t._v("编辑文章")]),n("h3",[t._v("文章标题")]),n("el-input",{model:{value:t.title,callback:function(e){t.title=e},expression:"title"}}),n("p",{staticClass:"msg"},[t._v("限17个字")]),n("h3",[t._v("内容简介")]),n("el-input",{attrs:{type:"textarea",rows:"3"},model:{value:t.description,callback:function(e){t.description=e},expression:"description"}}),n("p",{staticClass:"msg"},[t._v("限30个字")]),n("h3",[t._v("文章内容")]),n("el-input",{attrs:{type:"textarea",rows:"15"},model:{value:t.content,callback:function(e){t.content=e},expression:"content"}}),n("p",{staticClass:"msg"},[t._v("限30个字")]),n("div",[n("el-switch",{attrs:{"active-text":"首页展示","inactive-text":"自己可见"},model:{value:t.atIndex,callback:function(e){t.atIndex=e},expression:"atIndex"}})],1),n("el-button",{on:{click:t.onEdit}},[t._v("确定")])],1)},rt=[],at={data:function(){return{blogId:"",title:"",description:"",content:"",atIndex:!1}},created:function(){var t=this;this.blogId=this.$route.params.blogId,R.getDetail({blogId:this.blogId}).then((function(e){t.title=e.data.title,t.description=e.data.description,t.content=e.data.content,t.atIndex=e.data.atIndex}))},methods:{onEdit:function(){var t=this;R.updateBlog({blogId:this.blogId},{title:this.title,description:this.description,content:this.content,atIndex:this.atIndex}).then((function(e){t.$message.success(e.msg),t.$router.push({path:"/detail/".concat(e.data.id)})}))}}},st=at,ot=(n("5ca8"),Object(v["a"])(st,nt,rt,!1,null,"b4aecb4e",null)),it=ot.exports,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"user"}},[n("section",{staticClass:"userInfo"},[n("img",{staticClass:"avatar",attrs:{src:t.user.avatar,alt:t.user.username}}),n("h3",[t._v(t._s(t.user.username))])]),n("section",t._l(t.blogs,(function(e){return n("router-link",{key:e.id,staticClass:"item",attrs:{to:"/detail/"+e.id}},[n("div",{staticClass:"date"},[n("span",{staticClass:"day"},[t._v(t._s(t.splitDate(e.createdAt).date))]),n("span",{staticClass:"month"},[t._v(t._s(t.splitDate(e.createdAt).month)+"月")]),n("span",{staticClass:"year"},[t._v(t._s(t.splitDate(e.createdAt).year))])]),n("h3",[t._v(t._s(e.title))]),n("p",[t._v(t._s(e.description))])])})),1),n("section",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.onPageChange}})],1)])},ut=[],lt={data:function(){return{userId:"",blogs:[],user:{},page:1,total:0}},created:function(){var t=this;this.userId=this.$route.params.userId,this.page=this.$route.query.page||1,R.getBlogsByUserId(this.userId,{page:this.page}).then((function(e){t.user=e.data[0].user,t.page=e.page,t.total=e.total,t.blogs=e.data}))},methods:{splitDate:function(t){var e="object"===Object(r["a"])(t)?t:new Date(t);return{date:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},onPageChange:function(t){var e=this;R.getBlogsByUserId(this.userId,{page:t}).then((function(n){e.blogs=n.data,e.total=n.total,e.page=n.page,e.$router.push({path:"/user/".concat(e.userId),query:{page:t}})}))}}},dt=lt,pt=(n("4d54"),Object(v["a"])(dt,ct,ut,!1,null,"876ef9a4",null)),gt=pt.exports,ft=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"my"}},[n("section",{staticClass:"userInfo"},[n("img",{staticClass:"avatar",attrs:{src:t.user.avatar,alt:t.user.username}}),n("h3",[t._v(t._s(t.user.username))])]),n("section",t._l(t.blogs,(function(e){return n("router-link",{key:e.id,staticClass:"item",attrs:{to:"/detail/"+e.id}},[n("div",{staticClass:"date"},[n("span",{staticClass:"day"},[t._v(t._s(t.splitDate(e.createdAt).date))]),n("span",{staticClass:"month"},[t._v(t._s(t.splitDate(e.createdAt).month)+"月")]),n("span",{staticClass:"year"},[t._v(t._s(t.splitDate(e.createdAt).year))])]),n("h3",[t._v(t._s(e.title))]),n("p",[t._v(t._s(e.description))]),n("div",{staticClass:"actions"},[n("router-link",{attrs:{to:"/edit/"+e.id}},[t._v("编辑")]),n("a",{staticClass:"delete",attrs:{href:"#"},on:{click:function(n){return n.preventDefault(),t.onDelete(e.id)}}},[t._v("删除")])],1)])})),1),n("section",{staticClass:"pagination"},[n("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"current-page":t.page},on:{"current-change":t.onPageChange}})],1)])},vt=[];function ht(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ht(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ht(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var mt={data:function(){return{blogs:[],page:1,total:0}},computed:bt({},Object(l["c"])(["user"])),created:function(){var t=this;this.page=parseInt(this.$route.query.page)||1,R.getBlogsByUserId(this.user.id,{page:this.page}).then((function(e){t.page=e.page,t.total=e.total,t.blogs=e.data}))},methods:{onDelete:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){R.deleteBlog({blogId:t}).then((function(){e.$message({type:"success",message:"删除成功!"}),e.blogs=e.blogs.filter((function(e){return e.id!=t}))}))}))},splitDate:function(t){var e="object"===Object(r["a"])(t)?t:new Date(t);return{date:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}},onPageChange:function(t){var e=this;R.getBlogsByUserId(this.user.id,{page:t}).then((function(n){e.blogs=n.data,e.total=n.total,e.page=n.page,e.$router.push({path:"/my",query:{page:t}})}))}}},Ot=mt,yt=(n("3c07"),Object(v["a"])(Ot,ft,vt,!1,null,"9f6bd492",null)),_t=yt.exports,wt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"loginBox"},[n("h2",[t._v("登录")]),n("div",{staticClass:"inputBox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{placeholder:"用户名",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"inputBox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onLogin(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("el-button",{attrs:{size:"medium"},on:{click:t.onLogin}},[t._v("登录")]),n("p",{staticClass:"notice"},[t._v(" 没有账号？ "),n("router-link",{attrs:{to:"/register"}},[t._v("注册新用户")])],1)],1)])},xt=[];function It(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?It(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var Ct={data:function(){return{username:"",password:""}},methods:jt({},Object(l["b"])(["login"]),{onLogin:function(){var t=this;this.login({username:this.username,password:this.password}).then((function(){t.$router.push({path:t.$route.query.redirect||"/"})}))}})},kt=Ct,Pt=(n("6eb2"),Object(v["a"])(kt,wt,xt,!1,null,"08a45aae",null)),Et=Pt.exports,Dt=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"login"}},[n("div",{staticClass:"loginBox"},[n("h2",[t._v("注册")]),n("div",{staticClass:"inputBox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{placeholder:"用户名",id:"username"},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}})]),n("div",{staticClass:"inputBox"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{type:"password",placeholder:"密码"},domProps:{value:t.password},on:{keydown:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.onRegister(e)},input:function(e){e.target.composing||(t.password=e.target.value)}}})]),n("el-button",{attrs:{size:"medium"},on:{click:t.onRegister}},[t._v("注册")])],1)])},Lt=[];function Tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function Bt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?Tt(Object(n),!0).forEach((function(e){Object(u["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var $t={data:function(){return{username:"",password:""}},methods:Bt({},Object(l["b"])(["register"]),{onRegister:function(){var t=this;this.register({username:this.username,password:this.password}).then((function(){t.$router.push({path:"/"})}))}})},St=$t,At=(n("03e6"),Object(v["a"])(St,Dt,Lt,!1,null,"95c62128",null)),Rt=At.exports,Gt=(n("96cf"),n("1da1")),Ut={REGISTER:"/auth/register",LOGIN:"/auth/login",LOGOUT:"/auth/logout",GET_INFO:"/auth"},Mt={register:function(t){var e=t.username,n=t.password;return S(Ut.REGISTER,"POST",{username:e,password:n})},login:function(t){var e=t.username,n=t.password;return S(Ut.LOGIN,"POST",{username:e,password:n})},logout:function(){return S(Ut.LOGOUT)},getInfo:function(){return S(Ut.GET_INFO)}},qt={state:{user:null,isLogin:!1},getters:{user:function(t){return t.user},isLogin:function(t){return t.isLogin}},mutations:{setUser:function(t,e){t.user=e.user},setLogin:function(t,e){t.isLogin=e.isLogin}},actions:{login:function(t,e){var n=t.commit,r=e.username,a=e.password;return Mt.login({username:r,password:a}).then((function(t){n("setUser",{user:t.data}),n("setLogin",{isLogin:!0})}))},register:function(){var t=Object(Gt["a"])(regeneratorRuntime.mark((function t(e,n){var r,a,s,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.commit,a=n.username,s=n.password,t.next=4,Mt.register({username:a,password:s});case 4:return o=t.sent,r("setUser",{user:o.data}),r("setLogin",{isLogin:!0}),t.abrupt("return",o.data);case 8:case"end":return t.stop()}}),t)})));function e(e,n){return t.apply(this,arguments)}return e}(),logout:function(){var t=Object(Gt["a"])(regeneratorRuntime.mark((function t(e){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=e.commit,t.next=3,Mt.logout();case 3:n("setUser",{user:null}),n("setLogin",{isLogin:!1});case 5:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}(),checkLogin:function(){var t=Object(Gt["a"])(regeneratorRuntime.mark((function t(e){var n,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.commit,r=e.state,!r.isLogin){t.next=3;break}return t.abrupt("return",!0);case 3:return t.next=5,Mt.getInfo();case 5:if(a=t.sent,n("setLogin",{isLogin:a.isLogin}),a.isLogin){t.next=9;break}return t.abrupt("return",!1);case 9:return n("setUser",{user:a.data}),t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));function e(e){return t.apply(this,arguments)}return e}()}},Nt={state:{},getter:{},mutations:{},actions:{},modules:{}};a["default"].use(l["a"]);var Ft=new l["a"].Store({modules:{auth:qt,blog:Nt}});a["default"].use(P["a"]);var Ht=[{path:"/",name:"index",component:q},{path:"/register",name:"register",component:Rt},{path:"/login",name:"login",component:Et},{path:"/detail/:blogId",name:"detail",component:K},{path:"/create",name:"cerate",component:et,meta:{requiresAuth:!0}},{path:"/edit/:blogId",name:"edit",component:it,meta:{requiresAuth:!0}},{path:"/user/:userId",name:"user",component:gt},{path:"/my/",name:"my",component:_t,meta:{requiresAuth:!0}}],Jt=new P["a"]({routes:Ht});Jt.beforeEach((function(t,e,n){t.matched.some((function(t){return t.meta.requiresAuth}))?Ft.dispatch("checkLogin").then((function(e){e?n():n({path:"/login",query:{redirect:t.fullPath}})})):n()}));var zt=Jt;n("0fae");a["default"].use($.a),a["default"].config.productionTip=!1,a["default"].filter("formatDate",(function(t){var e,n="object"===Object(r["a"])(t)?t:new Date(t),a=n.getTime(),s=Date.now(),o=Math.abs(s-a);switch(!0){case o<6e4:e="刚刚";break;case o<36e5:e=Math.floor(o/6e4)+"分钟前";break;case o<864e5:e=Math.floor(o/36e5)+"小时前";break;default:e=Math.floor(o/864e5)+"天前"}return e})),new a["default"]({router:zt,store:Ft,render:function(t){return t(k)}}).$mount("#app")},"5c0b":function(t,e,n){"use strict";var r=n("9c0c"),a=n.n(r);a.a},"5ca8":function(t,e,n){"use strict";var r=n("211b"),a=n.n(r);a.a},6393:function(t,e,n){},"6eb2":function(t,e,n){"use strict";var r=n("986f"),a=n.n(r);a.a},"6f06":function(t,e,n){},"733f":function(t,e,n){"use strict";var r=n("3b90"),a=n.n(r);a.a},9393:function(t,e,n){},"986f":function(t,e,n){},9988:function(t,e,n){"use strict";var r=n("9393"),a=n.n(r);a.a},"9c0c":function(t,e,n){},"9fe2":function(t,e,n){},b423:function(t,e,n){},d1f3:function(t,e,n){"use strict";var r=n("b423"),a=n.n(r);a.a},ffa7:function(t,e,n){}});
//# sourceMappingURL=app.dc922974.js.map